{
  "SportsMissions_Consts": {
    "contextName": "SportsMissions_Consts",
    "variables": {
      "IS_TUTORIAL_ENABLED": true,
      "SHOW_TUTORIAL_ON_START": false,
      "MIN_START_STORY_LEVEL": 101
    }
  },
  "LocalContextConfig": {
    "contextName": "SportsMissions_Loader",
    "variables": {
        "IsAllPacksDownloaded": {
          "value": {
            "binding": "@gffResourcePackDownloadComponent:allPackDownloaded"
          }
        },
        "IsLaunchConditionsSatisfied": {
          "value": {
            "type": "boolAnd",
            "conditions": [
              {
                "type": "contextBool",
                "name": "context.IsAllPacksDownloaded"
              },
              {
                "type": "boolNot",
                "name": "context.IsEventActive"
              }
            ],
            "description": "All packs downloaded AND event not active"
          },
          "lua": "return GetContextValue('IsAllPacksDownloaded') and not GetContextValue('IsEventActive')"
        },
        "IsEventActive": {
          "type": "boolValueVariable",
          "value": {
            "type": "stringCompare",
            "operationType": "NotEquals",
            "left": {
              "name": "property.@gffStateMachineComponent:currentState"
            },
            "right": {
              "value": "Disabled"
            },
            "description": "State machine state is not 'Disabled'"
          },
          "lua": "return GetPropertyValue('@gffStateMachineComponent:currentState') ~= 'Disabled'"
        },
        "CurrentState": {
          "type": "stringValueVariable",
          "value": {
            "type": "stringValueFromProperty",
            "binding": "@gffStateMachineComponent:currentState"
          }
        },
        "IsMinPlayerLevelReached": {
          "type": "boolValueVariable",
          "value": {
            "type": "integerCompare",
            "operationType": "MoreOrEquals",
            "left": {
              "name": "global.CurrMainStoryLevel"
            },
            "right": {
              "name": "context.MIN_START_STORY_LEVEL"
            },
            "description": "Player level must be >= MIN_START_STORY_LEVEL"
          },
          "lua": "return GetGlobalValue('CurrMainStoryLevel') >= GetContextValue('MIN_START_STORY_LEVEL')"
        },
        "CheckLaunchRequirements": {
          "type": "boolValueVariable",
          "value": {
            "type": "boolAnd",
            "conditions": [
              {
                "type": "contextBool",
                "name": "context.IsMinPlayerLevelReached"
              }
            ],
            "description": "Check if launch requirements are satisfied (min player level)"
          },
          "lua": "return GetContextValue('IsMinPlayerLevelReached')"
        }
    }
  },
  "ScheduleConfig": {
    "commonEnabledCondition": {
      "type": "boolAnd",
      "conditions": [
        {
          "type": "contextBool",
          "name": "context.CheckLaunchRequirements"
        },
        {
          "type": "contextBool",
          "name": "context.IsLaunchConditionsSatisfied"
        }
      ],
      "description": "Check launch requirements AND launch conditions satisfied"
    },
    "commonEnabledConditionLua": "return GetContextValue('CheckLaunchRequirements') and GetContextValue('IsLaunchConditionsSatisfied')",
    "scheduleConfigs": [
      {
        "id": "SportsMissions_CheatStart",
        "type": "gffTimeRangeScheduleLaunch",
        "cheatLaunch": true,
        "activateStart": 1756018800,
        "activateEnd": 1756364400
      },
      {
        "id": "SportsMissions820s1[TaskPack2]",
        "type": "gffTimeRangeScheduleLaunch",
        "activateStart": 1757314800,
        "activateEnd": 1757660400,
        "enabled": {
          "conditionAsset": "Cond_SportsMissions_LaunchesEnabled"
        }
      }
    ],
    "needTryActivateOnActivate": false,
    "needTryActivateOnUpdate": true
  },
  "SportsMissionConfig": {
    "balanceAsset": {
      "assetType": "SportsMissionsTasksBalanceDataAsset",
      "assetId": "SportsMissions_TaskBalanceDataAsset"
    },
    "rewardsBalanceAsset": {
      "assetType": "SportsMissionsTasksRewardsDataAsset",
      "assetId": "SportsMissions_TaskRewardsDataAsset"
    }
  },
  "ResourcePackDownloadConfig": {
    "packId": "SportsMissions",
    "enableCondition": {
      "type": "contextBool",
      "name": "context.IsEventActive",
      "description": "Event must be active"
    },
    "enableConditionLua": "return GetContextValue('IsEventActive')",
    "requiredCondition": {
      "type": "integerCompare",
      "operationType": "MoreOrEquals",
      "playerLevel": {
        "name": "global.CurrMainStoryLevel"
      },
      "minRequiredLevel": {
        "name": "context.MIN_START_STORY_LEVEL",
        "offset": -5
      },
      "description": "Player level must be at least (MIN_START_STORY_LEVEL - 5)"
    },
    "requiredConditionLua": "return GetGlobalValue('CurrMainStoryLevel') >= (GetContextValue('MIN_START_STORY_LEVEL') - 5)"
  },
  "ContextRegistratorConfig": {
    "globalId": "GlobalSportsMissionsLoaderFeature",
    "contextComponentHolder": "SportsMissionsLoaderContext"
  },
  "StateMachineConfig": {
    "defaultState": "Disabled",
    "states": [
      {
        "name": "Disabled",
        "transitions": [
          {
            "target": "WaitStart",
            "triggerIds": ["StateGraph.ToWaitStart"]
          }
        ]
      },
      {
        "name": "WaitStart",
        "transitions": [
          {
            "target": "InProgress",
            "triggerIds": ["StateGraph.ToInProgress"]
          },
          {
            "target": "Disabled",
            "triggerIds": ["StateGraph.ToDisabled"]
          }
        ]
      },
      {
        "name": "InProgress",
        "transitions": [
          {
            "target": "Completed",
            "triggerIds": ["StateGraph.ToCompleted"]
          },
          {
            "target": "TimeoutReward",
            "triggerIds": ["StateGraph.ToTimeoutReward"]
          },
          {
            "target": "Disabled",
            "triggerIds": ["StateGraph.ToDisabled"]
          }
        ]
      },
      {
        "name": "Completed",
        "transitions": [
          {
            "target": "FinalReward",
            "triggerIds": ["StateGraph.ToFinalReward"]
          },
          {
            "target": "Disabled",
            "triggerIds": ["StateGraph.ToDisabled"]
          }
        ]
      },
      {
        "name": "TimeoutReward",
        "transitions": [
          {
            "target": "Disabled",
            "triggerIds": ["StateGraph.ToDisabled"]
          }
        ]
      },
      {
        "name": "FinalReward",
        "transitions": [
          {
            "target": "Disabled",
            "triggerIds": ["StateGraph.ToDisabled"]
          }
        ]
      }
    ],
    "handlersSettings": {
      "InProgress": {
        "eventsFilter": ["EnterComplete"],
        "statesFilter": ["InProgress"]
      }
    }
  }
}
